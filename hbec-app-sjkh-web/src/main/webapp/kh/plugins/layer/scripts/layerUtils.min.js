define(function(y,W,x){function V(b){b&&b.preventDefault?b.preventDefault():window.event.returnValue=!1}function U(a,n,m,l){if("default"!=H){var k='<div class="pop_tip'+(0==n?" right":" error")+'" id="pop_tip_alert"><span class="icon"></span><p><span style="display:block;text-align:center;padding:0 16px;font-size:16px">'+a+'</span></p><div class="btn"><a href="javascript:void(0);" id="pop_tip_alert_btn">'+(l||"确  定")+"</a></div></div>",j=function(){return K.layer({type:1,title:!1,closeBtn:!1,shade:[iBrowser.ios?0:0.5,"#000",!0],border:[5,0.5,"",!0],area:["310px","auto"],offset:[0.3*I.appHeight+"px",""],page:{html:k},success:function(){window.ontouchmove=V;var c=I.triggerEventName;$x("pop_tip_alert","pop_tip_alert_btn").off(c),$x("pop_tip_alert","pop_tip_alert_btn").on(c,function(){m&&m(),J.close(G),G=-9999}),K("#pop_tip_alert").css("margin-top","-"+K("#pop_tip_alert").height()/2+"px")},end:function(){window.ontouchmove=null}})};-9999==G?G=j():(J.close(G),G=j())}else{var i=0==n?1:3;G=K.layer({area:["310px","auto"],offset:[0.3*I.appHeight+"px",""],dialog:{btn:[l||"确  定"],msg:a,type:i,yes:function(b){J.close(b),m&&m()}},title:"提示信息",border:[0,0,"",!1],shade:[iBrowser.ios?0:0.5,"#000",!0],success:function(){window.ontouchmove=V},end:function(){window.ontouchmove=null}})}}function T(a,n,m,l,k){if("default"!=H){var j='<div class="pop_tip notice" id="pop_tip_confirm"><span class="icon"></span><p><span style="display:block;text-align:center;padding:0 16px;font-size:16px">'+a+'</span></p><div class="btn"><a href="javascript:void(0);" id="pop_tip_confirm_yes">'+(l||"确 定")+'</a><a href="javascript:void(0);" id="pop_tip_confirm_no">'+(k||"取消")+"</a></div></div>",i=function(){return K.layer({type:1,title:!1,closeBtn:!1,shade:[iBrowser.ios?0:0.5,"#000",!0],border:[5,0.5,"",!0],area:["310px","auto"],offset:[0.3*I.appHeight+"px",""],page:{html:j},success:function(){window.ontouchmove=V;var c=I.triggerEventName;$x("pop_tip_confirm","pop_tip_confirm_yes").off(c),$x("pop_tip_confirm","pop_tip_confirm_yes").on(c,function(){n&&n(),J.close(F),F=-9999}),$x("pop_tip_confirm","pop_tip_confirm_no").off(c),$x("pop_tip_confirm","pop_tip_confirm_no").on(c,function(){m&&m(),J.close(F),F=-9999}),K("#pop_tip_confirm").css("margin-top","-"+K("#pop_tip_confirm").height()/2+"px")},end:function(){window.ontouchmove=null}})};-9999==F?F=i():(J.close(F),F=i())}else{F=K.layer({area:["310px","auto"],offset:[0.3*I.appHeight+"px",""],dialog:{btns:2,btn:[l||"确 定",k||"取消"],msg:a,type:4,yes:function(b){J.close(b),n&&n()},no:function(b){J.close(b),m&&m()}},title:"提示信息",border:[0,0,"",!1],shade:[iBrowser.ios?0:0.5,"#000",!0],success:function(){window.ontouchmove=V},end:function(){window.ontouchmove=null}})}}function S(a,l,k){if(null!=A&&(clearTimeout(A),A=null),k=k>0?k:2,"default"!=H){var j='<div class="pop_tip'+(0==a?" right":" error")+'" id="pop_tip_msg"><span class="icon"></span><p><span style="display:block;text-align:center;padding:0 16px;font-size:16px">'+l+"</span></p></div>",i=function(){var c=K.layer({type:1,title:!1,closeBtn:!1,shadeClose:!0,shade:[iBrowser.ios?0:0.5,"#000",!0],border:[5,0.5,"",!0],area:["310px","auto"],offset:[0.3*I.appHeight+"px",""],page:{html:j},success:function(){window.ontouchmove=V,K("#pop_tip_msg").css("margin-top","-"+K("#pop_tip_msg").height()/2+"px")},end:function(){window.ontouchmove=null}});return A=setTimeout(function(){J.close(E),E=-9999},1000*k),c};-9999==E?E=i():(J.close(E),E=i())}else{var h=0==a?1:3;E=K.layer({area:["310px","auto"],offset:[0.4*I.appHeight+"px",""],closeBtn:[0,!1],shadeClose:!0,time:k,dialog:{btns:0,msg:l,type:h},title:!1,border:[0,0,"",!1],shade:[iBrowser.ios?0:0.5,"#000",!0],success:function(){window.ontouchmove=V},end:function(){window.ontouchmove=null}})}}function R(d,c){D=J.tips(d,K(c),0,200,0,["background-color:#CC0000; color:#fff","#CC0000"]),K(c).ScrollTo(200)}function Q(){-9999!=D&&(J.close(D),D=-9999)}function P(){-9999!=B&&(J.close(B),B=-9999)}function O(){-9999!=G&&(J.close(G),G=-9999),-9999!=F&&(J.close(F),F=-9999),-9999!=D&&(J.close(D),D=-9999),-9999!=B&&(J.close(B),B=-9999)}function N(a,j,i){if(a){j=j||"请等待...";var h="undefined"!=typeof i?i?"block":"none":"block",g='<div id="iLoading_overlay" class="iLoading_overlay" style="display: '+h+';"></div><div class="iLoading_showbox" style="display: block; opacity: 1;"><div class="iLoading_loading_pic"></div><p>'+j+"</p></div>";loadingLayer=function(){return K.layer({type:1,title:!1,closeBtn:!1,shade:[0.5,"#000",!1],border:[0,0,"#fff",!0],area:["auto","auto"],offset:["0px","0px"],page:{html:g},success:function(){I.isClickShadeHide&&K("#iLoading_overlay").click(function(){K(this).hide()})}})},window.ontouchmove=V,-9999==C?C=loadingLayer():(J.close(C),C=loadingLayer())}else{window.ontouchmove=null,J.close(C),C=-9999}}function M(b){return B=K.layer({type:1,title:!1,closeBtn:!1,border:[5,0.5,"",!0],area:["310px","auto"],offset:[0.3*I.appHeight+"px",""],page:{html:b}})}function L(d){var c=0;switch(d+=""){case"0":c=B;break;case"1":c=G;break;case"2":c=F;break;case"3":c=E;break;case"4":c=D;break;case"5":c=C;break;default:c=-9999}return c}var K=jQuery=y("jquery"),J=y("layer"),I=y("gconfig"),H=I.layerTheme,G=-9999,F=-9999,E=-9999,D=-9999,C=-9999,B=-9999,A=null,z={iAlert:U,iConfirm:T,iMsg:S,iTips:R,iTipsClose:Q,iCustomClose:P,iLayerClose:O,iLoading:N,layerCustom:M,getLayerIdx:L};x.exports=z});