define(function(j,k,i){function s(g,f,u,t){try{cordova.exec(function(b){null!=f&&f(b)},function(b){null!=u?u(b):(m.iLoading(!1),m.iAlert("插件调用失败:"+b))},g,g,[t])}catch(h){m.iLoading(!1),m.iAlert("不支持phonegap！")}}function r(){j("gconfig").global.isOnline=!1,s("toastPlugin",null,function(){m.iMsg(-1,"网络不可用，请检查您的网络设置!")},{content:"网络不可用，请检查您的网络设置!",type:0})}function q(){j("gconfig").global.isOnline=!0,s("toastPlugin",null,function(){m.iMsg(-1,"网络连接正常")},{content:"网络连接正常",type:0})}function p(){var a=function(){s("closeAppPlugin",null,null,{})};s("toastPlugin",null,function(){m.iConfirm("确认退出应用程序？",function(){s("closeAppPlugin",null,null,{})},function(){window.clearTimeout(d),document.removeEventListener("backbutton",a,!1),document.addEventListener("backbutton",o,!1)})},{content:"再按一次退出开户程序",type:0}),document.removeEventListener("backbutton",o,!1),document.addEventListener("backbutton",a,!1);var d=window.setTimeout(function(){window.clearTimeout(d),document.removeEventListener("backbutton",a,!1),document.addEventListener("backbutton",o,!1)},2500)}function o(){if(j("gconfig").isDirectExit){p()}else{var d=$(".page[data-display=block]").attr("data-pageLevel");if("2"==d){p()}else{var c=j("appUtils").getSStorageInfo("_curPageCode");c=c&&"null"!=c?c:"",j.async(j("gconfig").scriptsPath+c,function(b){b.pageBack?b.pageBack():j("appUtils").pageBack()})}}}function n(){j("gconfig").global.isOnline=!0,document.addEventListener("offline",r,!1),document.addEventListener("online",q,!1),document.addEventListener("backbutton",o,!1)}var m=j("layerUtils"),l={onDeviceReady:n,callShellMethod:s};i.exports=l});